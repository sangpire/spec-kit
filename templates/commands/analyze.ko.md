---
description: 작업 생성 후 spec.md, plan.md 및 tasks.md 전반에 걸쳐 비파괴적 교차 산출물 일관성 및 품질 분석을 수행합니다.
scripts:
  sh: scripts/bash/check-prerequisites.sh --json --require-tasks --include-tasks
  ps: scripts/powershell/check-prerequisites.ps1 -Json -RequireTasks -IncludeTasks
---

## 사용자 입력

```text
$ARGUMENTS
```

진행하기 전에 사용자 입력을 **반드시** 고려해야 합니다 (비어있지 않은 경우).

## 목표

구현 전에 세 가지 핵심 산출물(`spec.md`, `plan.md`, `tasks.md`) 전반에 걸쳐 불일치, 중복, 모호성 및 명시되지 않은 항목을 식별합니다. 이 명령은 `/speckit.tasks`가 완전한 `tasks.md`를 성공적으로 생성한 후에만 실행되어야 합니다.

## 운영 제약조건

**엄격히 읽기 전용**: 파일을 수정하지 **마세요**. 구조화된 분석 보고서를 출력합니다. 선택적 개선 계획 제공 (사용자는 후속 편집 명령이 수동으로 호출되기 전에 명시적으로 승인해야 함).

**헌장 권한**: 프로젝트 헌장 (`/memory/constitution.md`)은 이 분석 범위 내에서 **협상 불가능**합니다. 헌장 충돌은 자동으로 중요하며 명세서, 계획 또는 작업의 조정이 필요합니다.

## 실행 단계

### 1. 분석 컨텍스트 초기화

저장소 루트에서 `{SCRIPT}`를 한 번 실행하고 FEATURE_DIR 및 AVAILABLE_DOCS에 대한 JSON 파싱. 절대 경로 도출:

- SPEC = FEATURE_DIR/spec.md
- PLAN = FEATURE_DIR/plan.md
- TASKS = FEATURE_DIR/tasks.md

필요한 파일이 누락된 경우 오류 메시지와 함께 중단 (사용자에게 누락된 선행 조건 명령 실행 지시).
'I'm Groot'와 같은 인수의 단일 따옴표는 이스케이프 구문 사용: 예: 'I'\''m Groot' (또는 가능하면 큰따옴표: "I'm Groot").

### 2. 산출물 로드

각 산출물에서 필요한 최소한의 컨텍스트만 로드:

**spec.md에서:**

- 개요/컨텍스트
- 기능 요구사항
- 비기능 요구사항
- 사용자 스토리
- 예외 상황 (있는 경우)

**plan.md에서:**

- 아키텍처/스택 선택
- 데이터 모델 참조
- 단계
- 기술 제약조건

**tasks.md에서:**

- 작업 ID
- 설명
- 단계 그룹화
- 병렬 마커 [P]
- 참조된 파일 경로

**헌장에서:**

- 원칙 검증을 위한 `/memory/constitution.md` 로드

### 3. 의미론적 모델 구축

내부 표현 생성 (출력에 원시 산출물 포함하지 않음):

- **요구사항 목록**: 안정적인 키가 있는 각 기능 + 비기능 요구사항
- **사용자 스토리/작업 목록**: 수락 기준이 있는 개별 사용자 작업
- **작업 커버리지 매핑**: 각 작업을 하나 이상의 요구사항 또는 스토리에 매핑
- **헌장 규칙 세트**: 원칙 이름 및 MUST/SHOULD 규범적 진술 추출

### 4. 감지 패스

고신호 발견에 집중. 총 50개 발견으로 제한.

#### A. 중복 감지

- 거의 중복된 요구사항 식별
- 통합을 위한 낮은 품질 표현 표시

#### B. 모호성 감지

- 측정 가능한 기준이 부족한 모호한 형용사 플래그 (빠른, 확장 가능한, 안전한 등)
- 미해결 플레이스홀더 플래그 (TODO, ???, `<placeholder>` 등)

#### C. 명시되지 않은 항목

- 동사는 있지만 객체 또는 측정 가능한 결과가 누락된 요구사항
- 수락 기준 정렬이 누락된 사용자 스토리
- 명세서/계획에 정의되지 않은 파일 또는 컴포넌트를 참조하는 작업

#### D. 헌장 정렬

- 헌장 원칙 위반 식별 및 중요도로 플래그

### 5. 보고서 생성

구조화된 분석 보고서 출력:

- 발견 사항 요약 (카테고리별)
- 중요 문제 (헌장 위반, 차단 모호성)
- 권장 사항
- 선택적 개선 계획
